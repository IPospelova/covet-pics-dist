/*!
 * Copyright by Space Squirrel Ltd.
 */
function t(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var e=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),n=()=>Math.random().toString(36).substring(7).split("").join("."),r={INIT:`@@redux/INIT${n()}`,REPLACE:`@@redux/REPLACE${n()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${n()}`};function o(t){if("object"!=typeof t||null===t)return!1;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||null===Object.getPrototypeOf(t)}function i(n,u,c){if("function"!=typeof n)throw new Error(t(2));if("function"==typeof u&&"function"==typeof c||"function"==typeof c&&"function"==typeof arguments[3])throw new Error(t(0));if("function"==typeof u&&void 0===c&&(c=u,u=void 0),void 0!==c){if("function"!=typeof c)throw new Error(t(1));return c(i)(n,u)}let f=n,s=u,a=new Map,l=a,d=0,p=!1;function y(){l===a&&(l=new Map,a.forEach(((t,e)=>{l.set(e,t)})))}function h(){if(p)throw new Error(t(3));return s}function w(e){if("function"!=typeof e)throw new Error(t(4));if(p)throw new Error(t(5));let n=!0;y();const r=d++;return l.set(r,e),function(){if(n){if(p)throw new Error(t(6));n=!1,y(),l.delete(r),a=null}}}function b(e){if(!o(e))throw new Error(t(7));if(void 0===e.type)throw new Error(t(8));if("string"!=typeof e.type)throw new Error(t(17));if(p)throw new Error(t(9));try{p=!0,s=f(s,e)}finally{p=!1}return(a=l).forEach((t=>{t()})),e}return b({type:r.INIT}),{dispatch:b,subscribe:w,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(t(10));f=e,b({type:r.REPLACE})},[e]:function(){const n=w;return{subscribe(e){if("object"!=typeof e||null===e)throw new Error(t(11));function r(){e.next&&e.next(h())}return r(),{unsubscribe:n(r)}},[e](){return this}}}}}function u(e){const n=Object.keys(e),o={};for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof e[r]&&(o[r]=e[r])}const i=Object.keys(o);let u;try{!function(e){Object.keys(e).forEach((n=>{const o=e[n];if(void 0===o(void 0,{type:r.INIT}))throw new Error(t(12));if(void 0===o(void 0,{type:r.PROBE_UNKNOWN_ACTION()}))throw new Error(t(13))}))}(o)}catch(t){u=t}return function(e={},n){if(u)throw u;let r=!1;const c={};for(let u=0;u<i.length;u++){const f=i[u],s=e[f],a=(0,o[f])(s,n);if(void 0===a)throw new Error(t(14));c[f]=a,r=r||a!==s}return r=r||i.length!==Object.keys(e).length,r?c:e}}function c(...t){return 0===t.length?t=>t:1===t.length?t[0]:t.reduce(((t,e)=>(...n)=>t(e(...n))))}var f=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function l(t){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var d=Object.getPrototypeOf;function p(t){return!!t&&!!t[a]}function y(t){return!!t&&(w(t)||Array.isArray(t)||!!t[s]||!!t.constructor?.[s]||j(t)||O(t))}var h=Object.prototype.constructor.toString();function w(t){if(!t||"object"!=typeof t)return!1;const e=d(t);if(null===e)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===h}function b(t,e){0===v(t)?Object.entries(t).forEach((([n,r])=>{e(n,r,t)})):t.forEach(((n,r)=>e(r,n,t)))}function v(t){const e=t[a];return e?e.type_:Array.isArray(t)?1:j(t)?2:O(t)?3:0}function m(t,e){return 2===v(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function E(t,e,n){const r=v(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function j(t){return t instanceof Map}function O(t){return t instanceof Set}function P(t){return t.copy_||t.base_}function g(t,e){if(j(t))return new Map(t);if(O(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&w(t))return d(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[a];let r=Reflect.ownKeys(n);for(let e=0;e<r.length;e++){const o=r[e],i=n[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(d(t),n)}function I(t,e=!1){return S(t)||p(t)||!y(t)||(v(t)>1&&(t.set=t.add=t.clear=t.delete=_),Object.freeze(t),e&&b(t,((t,e)=>I(e,!0)))),t}function _(){l(2)}function S(t){return Object.isFrozen(t)}var k,M={};function N(t){const e=M[t];return e||l(0),e}function x(){return k}function A(t,e){e&&(N("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function R(t){C(t),t.drafts_.forEach($),t.drafts_=null}function C(t){t===k&&(k=t.parent_)}function T(t){return k={drafts_:[],parent_:k,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $(t){const e=t[a];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function D(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return void 0!==t&&t!==n?(n[a].modified_&&(R(e),l(4)),y(t)&&(t=W(e,t),e.parent_||z(e,t)),e.patches_&&N("Patches").generateReplacementPatches_(n[a].base_,t,e.patches_,e.inversePatches_)):t=W(e,n,[]),R(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==f?t:void 0}function W(t,e,n){if(S(e))return e;const r=e[a];if(!r)return b(e,((o,i)=>B(t,r,e,o,i,n))),e;if(r.scope_!==t)return e;if(!r.modified_)return z(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const e=r.copy_;let o=e,i=!1;3===r.type_&&(o=new Set(e),e.clear(),i=!0),b(o,((o,u)=>B(t,r,e,o,u,n,i))),z(t,e,!1),n&&t.patches_&&N("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function B(t,e,n,r,o,i,u){if(p(o)){const u=W(t,o,i&&e&&3!==e.type_&&!m(e.assigned_,r)?i.concat(r):void 0);if(E(n,r,u),!p(u))return;t.canAutoFreeze_=!1}else u&&n.add(o);if(y(o)&&!S(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;W(t,o),e&&e.scope_.parent_||z(t,o)}}function z(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&I(e,n)}var F={get(t,e){if(e===a)return t;const n=P(t);if(!m(n,e))return function(t,e,n){const r=U(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}(t,n,e);const r=n[e];return t.finalized_||!y(r)?r:r===L(t.base_,e)?(X(t),t.copy_[e]=G(r,t)):r},has:(t,e)=>e in P(t),ownKeys:t=>Reflect.ownKeys(P(t)),set(t,e,n){const r=U(P(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const r=L(P(t),e),u=r?.[a];if(u&&u.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(((o=n)===(i=r)?0!==o||1/o==1/i:o!=o&&i!=i)&&(void 0!==n||m(t.base_,e)))return!0;X(t),q(t)}var o,i;return t.copy_[e]===n&&(void 0!==n||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==L(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,X(t),q(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const n=P(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty(){l(11)},getPrototypeOf:t=>d(t.base_),setPrototypeOf(){l(12)}},K={};function L(t,e){const n=t[a];return(n?P(n):t)[e]}function U(t,e){if(!(e in t))return;let n=d(t);for(;n;){const t=Object.getOwnPropertyDescriptor(n,e);if(t)return t;n=d(n)}}function q(t){t.modified_||(t.modified_=!0,t.parent_&&q(t.parent_))}function X(t){t.copy_||(t.copy_=g(t.base_,t.scope_.immer_.useStrictShallowCopy_))}function G(t,e){const n=j(t)?N("MapSet").proxyMap_(t,e):O(t)?N("MapSet").proxySet_(t,e):function(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:x(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=F;n&&(o=[r],i=K);const{revoke:u,proxy:c}=Proxy.revocable(o,i);return r.draft_=c,r.revoke_=u,c}(t,e);return(e?e.scope_:x()).drafts_.push(n),n}function H(t){if(!y(t)||S(t))return t;const e=t[a];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=g(t,e.scope_.immer_.useStrictShallowCopy_)}else n=g(t,!0);return b(n,((t,e)=>{E(n,t,H(e))})),e&&(e.finalized_=!1),n}b(F,((t,e)=>{K[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),K.deleteProperty=function(t,e){return K.set.call(this,t,e,void 0)},K.set=function(t,e,n){return F.set.call(this,t[0],e,n,t[0])};var J=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if("function"==typeof t&&"function"!=typeof e){const n=e;e=t;const r=this;return function(t=n,...o){return r.produce(t,(t=>e.call(this,t,...o)))}}let r;if("function"!=typeof e&&l(6),void 0!==n&&"function"!=typeof n&&l(7),y(t)){const o=T(this),i=G(t,void 0);let u=!0;try{r=e(i),u=!1}finally{u?R(o):C(o)}return A(o,n),D(r,o)}if(!t||"object"!=typeof t){if(r=e(t),void 0===r&&(r=t),r===f&&(r=void 0),this.autoFreeze_&&I(r,!0),n){const e=[],o=[];N("Patches").generateReplacementPatches_(t,r,e,o),n(e,o)}return r}l(1)},this.produceWithPatches=(t,e)=>{if("function"==typeof t)return(e,...n)=>this.produceWithPatches(e,(e=>t(e,...n)));let n,r;return[this.produce(t,e,((t,e)=>{n=t,r=e})),n,r]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){var e;y(t)||l(8),p(t)&&(p(e=t)||l(10),t=H(e));const n=T(this),r=G(t,void 0);return r[a].isManual_=!0,C(n),r}finishDraft(t,e){const n=t&&t[a];n&&n.isManual_||l(9);const{scope_:r}=n;return A(r,e),D(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));const r=N("Patches").applyPatches_;return p(t)?r(t,e):this.produce(t,(t=>r(t,e)))}},Q=J.produce;function V(t){return({dispatch:e,getState:n})=>r=>o=>"function"==typeof o?o(e,n,t):r(o)}J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseStrictShallowCopy.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J);var Y=V(),Z=V,tt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?c:c.apply(null,arguments)};function et(t,e){function n(...n){if(e){let r=e(...n);if(!r)throw new Error(yt(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:n[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=e=>function(t){return o(t)&&"type"in t&&"string"==typeof t.type}(e)&&e.type===t,n}var nt=class t extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,t.prototype)}static get[Symbol.species](){return t}concat(...t){return super.concat.apply(this,t)}prepend(...e){return 1===e.length&&Array.isArray(e[0])?new t(...e[0].concat(this)):new t(...e.concat(this))}};function rt(t){return y(t)?Q(t,(()=>{})):t}function ot(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}var it=t=>e=>{setTimeout(e,t)};function ut(e){const n=function(t){const{thunk:e=!0}=t??{};let n=new nt;return e&&n.push("boolean"==typeof e?Y:Z(e.extraArgument)),n},{reducer:r,middleware:f,devTools:s=!0,preloadedState:a,enhancers:l}=e||{};let d,p;if("function"==typeof r)d=r;else{if(!o(r))throw new Error(yt(1));d=u(r)}p="function"==typeof f?f(n):n();let y=c;s&&(y=tt({trace:!1,..."object"==typeof s&&s}));const h=function(...e){return n=>(r,o)=>{const i=n(r,o);let u=()=>{throw new Error(t(15))};const f={getState:i.getState,dispatch:(t,...e)=>u(t,...e)},s=e.map((t=>t(f)));return u=c(...s)(i.dispatch),{...i,dispatch:u}}}(...p),w=(t=>function(e){const{autoBatch:n=!0}=e??{};let r=new nt(t);return n&&r.push(((t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let o=!0,i=!1,u=!1;const c=new Set,f="tick"===t.type?queueMicrotask:"raf"===t.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:it(10):"callback"===t.type?t.queueNotification:it(t.timeout),s=()=>{u=!1,i&&(i=!1,c.forEach((t=>t())))};return Object.assign({},r,{subscribe(t){const e=r.subscribe((()=>o&&t()));return c.add(t),()=>{e(),c.delete(t)}},dispatch(t){try{return o=!t?.meta?.RTK_autoBatch,i=!o,i&&(u||(u=!0,f(s))),r.dispatch(t)}finally{o=!0}}})})("object"==typeof n?n:void 0)),r})(h);return i(d,a,y(..."function"==typeof l?l(w):w()))}function ct(t){const e={},n=[];let r;const o={addCase(t,n){const r="string"==typeof t?t:t.type;if(!r)throw new Error(yt(28));if(r in e)throw new Error(yt(29));return e[r]=n,o},addMatcher:(t,e)=>(n.push({matcher:t,reducer:e}),o),addDefaultCase:t=>(r=t,o)};return t(o),[e,n,r]}var ft=Symbol.for("rtk-slice-createasyncthunk");function st(t,e){return`${t}/${e}`}function at({creators:t}={}){const e=t?.asyncThunk?.[ft];return function(t){const{name:n,reducerPath:r=n}=t;if(!n)throw new Error(yt(11));const o=("function"==typeof t.reducers?t.reducers(function(){function t(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return t.withTypes=()=>t,{reducer:t=>Object.assign({[t.name]:(...e)=>t(...e)}[t.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(t,e)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}),asyncThunk:t}}()):t.reducers)||{},i=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(t,e){const n="string"==typeof t?t:t.type;if(!n)throw new Error(yt(12));if(n in u.sliceCaseReducersByType)throw new Error(yt(13));return u.sliceCaseReducersByType[n]=e,c},addMatcher:(t,e)=>(u.sliceMatchers.push({matcher:t,reducer:e}),c),exposeAction:(t,e)=>(u.actionCreators[t]=e,c),exposeCaseReducer:(t,e)=>(u.sliceCaseReducersByName[t]=e,c)};function f(){const[e={},n=[],r]="function"==typeof t.extraReducers?ct(t.extraReducers):[t.extraReducers],o={...e,...u.sliceCaseReducersByType};return function(t){let e,[i,c,f]=ct((t=>{for(let e in o)t.addCase(e,o[e]);for(let e of u.sliceMatchers)t.addMatcher(e.matcher,e.reducer);for(let e of n)t.addMatcher(e.matcher,e.reducer);r&&t.addDefaultCase(r)}));if("function"==typeof t)e=()=>rt(t());else{const n=rt(t);e=()=>n}function s(t=e(),n){let r=[i[n.type],...c.filter((({matcher:t})=>t(n))).map((({reducer:t})=>t))];return 0===r.filter((t=>!!t)).length&&(r=[f]),r.reduce(((t,e)=>{if(e){if(p(t)){const r=e(t,n);return void 0===r?t:r}if(y(t))return Q(t,(t=>e(t,n)));{const r=e(t,n);if(void 0===r){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return t}),t)}return s.getInitialState=e,s}(t.initialState)}i.forEach((r=>{const i=o[r],u={reducerName:r,type:st(n,r),createNotation:"function"==typeof t.reducers};!function(t){return"asyncThunk"===t._reducerDefinitionType}(i)?function({type:t,reducerName:e,createNotation:n},r,o){let i,u;if("reducer"in r){if(n&&!function(t){return"reducerWithPrepare"===t._reducerDefinitionType}(r))throw new Error(yt(17));i=r.reducer,u=r.prepare}else i=r;o.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,u?et(t,u):et(t))}(u,i,c):function({type:t,reducerName:e},n,r,o){if(!o)throw new Error(yt(18));const{payloadCreator:i,fulfilled:u,pending:c,rejected:f,settled:s,options:a}=n,l=o(t,i,a);r.exposeAction(e,l),u&&r.addCase(l.fulfilled,u),c&&r.addCase(l.pending,c),f&&r.addCase(l.rejected,f),s&&r.addMatcher(l.settled,s),r.exposeCaseReducer(e,{fulfilled:u||pt,pending:c||pt,rejected:f||pt,settled:s||pt})}(u,i,c,e)}));const s=t=>t,a=new Map,l=new WeakMap;let d;function h(t,e){return d||(d=f()),d(t,e)}function w(){return d||(d=f()),d.getInitialState()}function b(e,n=!1){function r(t){let o=t[e];return void 0===o&&n&&(o=ot(l,r,w)),o}function o(e=s){const r=ot(a,n,(()=>new WeakMap));return ot(r,e,(()=>{const r={};for(const[o,i]of Object.entries(t.selectors??{}))r[o]=lt(i,e,(()=>ot(l,e,w)),n);return r}))}return{reducerPath:e,getSelectors:o,get selectors(){return o(r)},selectSlice:r}}const v={name:n,reducer:h,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...b(r),injectInto(t,{reducerPath:e,...n}={}){const o=e??r;return t.inject({reducerPath:o,reducer:h},n),{...v,...b(o,!0)}}};return v}}function lt(t,e,n,r){function o(o,...i){let u=e(o);return void 0===u&&r&&(u=n()),t(u,...i)}return o.unwrapped=t,o}var dt=at();function pt(){}function yt(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const ht=dt({name:"popup",initialState:{itemId:-1,items:[],productId:-1,products:[],isModalOpenEventSent:!1,isNextEnable:!0},reducers:{setPopupItemId:(t,e)=>{t.itemId=e.payload},setPopupItems:(t,e)=>{t.items=e.payload},setIsModalOpenEventSent:(t,e)=>{t.isModalOpenEventSent=e.payload},updatePopItemLink:(t,e)=>{const{itemId:n,linkId:r,properties:o}=e.payload,i=t.items.find((t=>t.id===n)),u=i.links.findIndex((t=>t.id===r));i.links[u]=Object.assign({},i.links[u],o)},changePopupItem:(t,e)=>{const{payload:n}=e,r=t.items.findIndex((e=>e.id===t.itemId));"next"===n&&r<t.items.length&&(t.itemId=t.items[r+1].id),"previous"===n&&r>0&&(t.itemId=t.items[r-1].id)},setPopupProductId:(t,e)=>{t.productId=e.payload},setProducts:(t,e)=>{t.products=e.payload}}}),{setPopupItemId:wt,setPopupItems:bt,updatePopItemLink:vt,changePopupItem:mt,setProducts:Et,setPopupProductId:jt,setIsModalOpenEventSent:Ot}=ht.actions;var Pt=ht.reducer;const gt=t=>{const e=t.popup.items.find((e=>e.id===t.popup.itemId));return void 0!==e?e:null},It=t=>[...t.popup.items.filter((t=>"upload_widget"!==t.source))],_t=t=>{const e=t.popup.products.find((e=>e.id===t.popup.productId));return void 0!==e?e:null},St=t=>-1!==t.popup.productId,kt=t=>{const e=t.popup.items.findIndex((e=>e.id===t.popup.itemId)),n=t.popup.items[e-1];return n&&"upload_widget"!==n.source},Mt=t=>{const e=t.popup.items.findIndex((e=>e.id===t.popup.itemId)),n=t.popup.items[e+1];return n&&"upload_widget"!==n.source};export{u as a,ut as b,dt as c,wt as d,jt as e,mt as f,Ot as g,gt as h,_t as i,St as j,kt as k,Mt as l,Et as m,It as n,Pt as p,bt as s,vt as u}